<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="todo.css">
     <link rel="stylesheet" href="jquery-ui-1.13.1/jquery-ui.css">
     <link rel="stylesheet" href="jquery-ui-1.13.1/jquery-ui.structure.css">
     <link rel="stylesheet" href="jquery-ui-1.13.1/jquery-ui.theme.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <title>Document</title>
     <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
     <script src="jquery-ui-1.13.1/jquery-ui.js"></script>

     <script>
          $(document).ready(function ()
          {
               $("#projects").tabs();

               $("ul").sortable({
                    opacity: 0.5,
                    distance: 0.5,
                    axis: "x",
                    // containment: "li"
               });
               $("ol").sortable({
                    opacity: 0.5,
                    distance: 0.5,
                    axis: "y",
                    // containment: "li"
               });


               // <div style="display: none;" title="Add Task" id="addtask-pop">
               // <label style="margin-right: .5rem; font-weight: bold;" for="newtasktxt">Task Name:</label> <input id="newtasktxt" style="padding: .5rem; background-color: rgba(0,0,0,0.1);" type="text">
               // </div>

               $("#btn-addtask").button().click(function()
               {
                    $("#addtask-pop").dialog({height: 190, width: 400, resizable: false,
                         buttons:{"Add":function()
                                        {
                                             $("#projects").tabs('refresh');
                                             var activetab = $("#projects").tabs("option","active");
                                             var title = $("#main > li:nth-child("+(activetab+1)+") > a").attr("href");
                                             $(title).append("<li><input type='checkbox'>"+$("#newtasktxt").val()+"</li>");
                                             $("#newtasktxt").val(" ");
                                             $(this).dialog('close');
                                        },
                                   "Cancel":function()
                                        {
                                             $("#newtasktxt").val("");
                                             $(this).dialog('close');
                                        }
                                   }
                    });                    
               });


               $("#btn-addproject").button().click(function()
               {
                    $("#addproject-pop").dialog({height: 190, width: 400, resizable: false,
                         buttons:{"Add":function()
                                        {
                                             var addtitle = $("#newprotxt").val();
                                             var replace = addtitle.split(" ").join("_");
                                             $("<li><a href='#"+replace+"'>"+addtitle+"</a></li>").appendTo("#main");
                                             $("<ol id='"+replace+"'></ol>").appendTo("#projects").sortable({axis:"y"});
                                             $("#projects").tabs('refresh');
                                             var tabcount = $("projects ,ui-tabs-nav li").length;
                                             $("#projects").tabs("option", "active", tabcount-1);
                                             $("#newprotxt").val("");
                                             $(this).dialog('close');
                                        },
                                   "Cancel":function()
                                        {
                                             $("#newprotxt").val("");
                                             $(this).dialog('close');
                                        }
                                   }
                    });                    
               });
          });
     </script>
</head>
<body>
     <div id="container">
          <h2>To do</h2>

          <!-- Button to add Category -->
          <div class="text-end mb-4 me-5">
               <button type="button" id="btn-addproject" class="btn btn-outline-primary px-5">Add Category</button>
          </div>

          <div id="projects">
               <ul id="main">
                    <li><a href="#personal">Personal</a></li>
                    <li><a href="#work">Work</a></li>
               </ul>

               <ol id="personal">
                    <li><input type="checkbox" name="" id="">Visit dentist</li>
                    <li><input type="checkbox" name="" id="">Do Dishes</li>
               </ol>
               <ol id="work">
                    <li><input type="checkbox" name="" id="">Collect files</li>
                    <li><input type="checkbox" name="" id="">Meeting</li>
               </ol>
          </div>

          <!-- Button to Add Task -->
          <div class="text-end mt-4 me-5">
               <button type="button" id="btn-addtask" class="btn btn-outline-primary px-5">Add Task</button>
          </div>

          <!-- Category Popup -->
          <div style="display: none;" title="Add Category" id="addproject-pop">
               <label style="margin-right: .5rem; font-weight: bold;" for="newprotxt">Category Name:</label> <input id="newprotxt" style="padding: .5rem; background-color: rgba(0,0,0,0.1);" type="text">
          </div>

          <!-- Task Popup -->
          <div style="display: none;" title="Add Task" id="addtask-pop">
               <label style="margin-right: .5rem; font-weight: bold;" for="newtasktxt">Task Name:</label> <input id="newtasktxt" style="padding: .5rem; background-color: rgba(0,0,0,0.1);" type="text">
          </div>
     </div>
     
</body>
</html>